---
layout: post
title:  "[자바 문법] 5. 스트림과 병렬 처리(진행중)"
date:   2017-10-12 22:10:13 +0800
categories: study
tags: java
---

**스트림과 병렬처리 방법을 알아 봅니다.** 

---

<br>

### 스트림

<br>

#### 반복자 스트림

* IteratorVsStreamExam.java

같은 결과 값을 갖지만 stream이 람다식을 이용해 더 단순해 보인다. 람다는 자바버전 1.8이상부터 이용가능 하다.

{% highlight python linenos %}
package stream;

import java.util.Arrays;
import java.util.Iterator;
import java.util.List;
import java.util.stream.Stream;

public class IteratorVsStreamExam {

	public static void main(String[] args) {
		List<String> list = Arrays.asList("홍길동","김정근","파이썬");
		
		//Iterator 이용
		Iterator<String> iterator = list.iterator();
		while(iterator.hasNext()) {
			String out = iterator.next();
			System.out.println(out);
		}
		
		System.out.println();
		
		//Stream 이용
		Stream<String> stream = list.stream();
		stream.forEach( name -> System.out.println(name));
	}
}

{% endhighlight %}

<br>

* ParallelExam.java

스트림은 내부 반복자를 이용하므로 병렬처리가 쉽다. 외부 반복자는 개발자가 컬렉션을 이용해 직접 요소를 반복해서 가져오는 패턴이다. 내부 반복자는 컬렉션 내부에서 요소들을 반복시키고 개발자는 요소당 처리해야할 코드만 제공하는 패턴이다. 이를 통해 순차적 으로 처리하는 외부 반복자보다 효율적이다 반복시킬 수 있다.

{% highlight python linenos %}
package stream;

import java.util.Arrays;
import java.util.List;
import java.util.stream.Stream;

public class ParallelExam {

	public static void main(String[] args) {
		List<String> list = Arrays.asList("홍길동", "삼식이", "아줌마",
				"람다맨", "자바맨");
		
		//순차 처리
		Stream<String> stream = list.stream();
		stream.forEach(ParallelExam :: print);
		
		System.out.println();
		
		//순차 처리
		Stream<String> parallelStream = list.parallelStream();
		parallelStream.forEach(ParallelExam :: print);
				
		System.out.println();
	}

	private static void print(String s) {
		// TODO Auto-generated method stub
		System.out.println(s + " : " + Thread.currentThread().getName());
	}
}
{% endhighlight %}

<br>

* 결괏값

{% highlight python linenos %}
홍길동 : main
삼식이 : main
아줌마 : main
람다맨 : main
자바맨 : main

아줌마 : main
자바맨 : ForkJoinPool.commonPool-worker-2
람다맨 : ForkJoinPool.commonPool-worker-2
홍길동 : ForkJoinPool.commonPool-worker-3
삼식이 : ForkJoinPool.commonPool-worker-1
{% endhighlight %}

<br>

#### 임시

* 임시

{% highlight python linenos %}
{% endhighlight %}

